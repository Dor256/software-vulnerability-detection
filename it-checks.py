import pickle
from sys import argv
import requests
import pandas as pd
import numpy as np

if len(argv) < 2:
   raise ValueError("Missing argument: File name")

filePath = argv[1]
func = open(filePath, "r").read()
res = requests.post('http://localhost:3000', data=func, headers={'Content-Type': 'text/plain'}).json()
df = pd.DataFrame([res], columns=res.keys())

model = pickle.load(open('./models/logistic_regression_no_sampling', 'rb'))

probability_result = model.predict_proba(df)
vuln_prob = probability_result[:,1]
print("OH NO") if vuln_prob >= 0.5 else print("OH YES")